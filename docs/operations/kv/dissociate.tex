\documentclass[../../main.tex]{subfiles}
\begin{document}
\subsubsection{Dissociate}
The operation $dissociate$ will remove some $k \mapsto v$ from $KV$ given $k \in KV$
\begin{schema}{Dissociate[KV, K]}
  m?, m! : KV \\
  k? : K \\
  dissociate~\_ : KV \cross K \surj KV
  \where
  m! = dissociate(m?, k?) @ m! = m? \ndres ~k? \implies \\
  \t1 (\dom ~m! = \dom ~(~m? \setminus ~k?)) ~\land \\
  \t1 (~m? \setminus ~m! = k? \iff k? \in m?) ~\land \\
  \t1 (~m? \setminus ~m! = \emptyset \iff k? \not \in m? \implies m? = m!) ~\land \\
  \t1 ((k?, m?_{k?}) \not \in m!)
\end{schema}
such that every mapping in $m?$ is also in $m!$ except for $k? \mapsto m?_{k?}$.
\begin{argue}
  M = \ldata k_{0}v_{k_{0}}, k_{1}v_{k_{1}} \rdata \\
  \t1 k_{0} = abc \ \land  v_{k_{0}} = 123 & $k_{0}v_{k_{0}} = abc \mapsto 123$ \\
  \t1 k_{1} = def \ \land v_{k_{1}} = xyz \mapsto 456 & $k_{1}v_{k_{1}} = def \mapsto xyz \mapsto 456$ \\
  dissociate(M, abc) = \ldata def \mapsto xyz \mapsto 456 \rdata \\
  dissociate(M, def) = \ldata abc \mapsto 123 \rdata \\
  dissociate(M, xyz) = M & $xyz \not \in M$
\end{argue}
\end{document}
